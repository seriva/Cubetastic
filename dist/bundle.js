!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var o=Math.PI/180;n.toRadian=function(t){return t*o},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return o});const o={addCSS(t){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},addElement(t,e){const n=document.createElement(t);return document.body.appendChild(n),e&&n.setAttribute("id",e),n},isMobile(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},fetch:t=>new Promise((e,n)=>{const o=new XMLHttpRequest;-1!==t.indexOf("jpg")&&(o.responseType="arraybuffer"),o.onreadystatechange=(()=>{4===o.readyState&&(200===o.status?e(o.response):n())}),o.open("GET",t,!0),o.send()}),dispatchEvent(t){window.dispatchEvent(new Event(t))}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1),i=n(4);o.a.addCSS(`\n    canvas {\n        background: #000;\n        width: 100vw; height: 100vh;\n        display: block;\n        z-index : 100;\n    }\n    `);const r=o.a.addElement("canvas");let a=r.getContext("webgl2",{antialias:!0});a||(a=r.getContext("experimental-webgl2",{antialias:!0})),a||i.a.error("Failed to initialize WebGL 2.0 context"),a.clearColor(0,0,0,1),a.clearDepth(1),a.enable(a.DEPTH_TEST),a.cullFace(a.BACK),a.enable(a.CULL_FACE),a.depthFunc(a.LEQUAL),i.a.log("Initialized renderer"),i.a.log("Renderer: "+a.getParameter(a.RENDERER)),i.a.log("Vendor: "+a.getParameter(a.VENDOR)),i.a.log("WebGL version: "+a.getParameter(a.VERSION)),i.a.log("GLSL version: "+a.getParameter(a.SHADING_LANGUAGE_VERSION)),window.addEventListener("resize",()=>{a.canvas.width=document.body.clientWidth,a.canvas.height=document.body.clientHeight,a.viewport(0,0,r.width,r.height)},!1),window.dispatchEvent(new Event("resize"));const s={gl:a,canvas:r}},function(t,e,n){e.glMatrix=n(0),e.mat2=n(17),e.mat2d=n(18),e.mat3=n(6),e.mat4=n(19),e.quat=n(20),e.vec2=n(21),e.vec3=n(7),e.vec4=n(8)},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o=n(1);let i=!1;const r=[];o.a.addCSS(`\n    #console {\n        -webkit-transition: all 0.150s ease-in-out;\n        display: flex; flex-flow:\n        column nowrap;\n        line-height: 95%;\n        border:1px solid #999;\n        background-color: #999;\n        opacity: 0.75;\n        z-index : 200;\n        width: 100%;\n        height: 35%;\n        position: absolute;\n        top: -37vh;\n        left: 0;\n        overflow: scroll;\n        overflow-x: hidden;\n    }\n\n    #console-input {\n        -webkit-transition: all 0.150s ease-in-out;\n        display: inline;\n        color: #fff;\n        font-size: 14px;\n        position: absolute;\n        z-index : 200;\n        top: -37vh;\n        left: 0; width:100%;\n        border:1px solid #999;\n        border-bottom:2px solid #fff;\n        border-top:2px solid #fff;\n        background-color: #999;\n        opacity: 0.75;\n        outline: none;\n    }\n\n    #console p {\n        margin-top: auto !important;\n        font-size: 14px;\n        color: #fff; \n        margin: 0px;\n        white-space: nowrap;\n    }\n\n    .console-down {\n        -webkit-transform: translate(0,37vh);\n    }\n\n    .console-input-down {\n        -webkit-transform: translate(0,72vh);\n    }\n    `);const a=o.a.addElement("div","console"),s=o.a.addElement("input","console-input");a.disabled=!0;const l=()=>{let t="<p>";for(let e=0;e<r.length;e++){const n=r[e];let o="#FFF";"warning"===n.type&&(o="#FF0"),"error"===n.type&&(o="#F00"),t=t+'<span style="color:'+o+'">'+n.message+"</span></br>"}a.innerHTML=t+"</p>",a.scrollTop=a.scrollHeight},u={visible:()=>i,execute(){""!==s.value&&(this.warn('Unknown command "'+s.value+'"'),s.value="")},toggle(t){(i=void 0===t?!i:t)?(a.classList.add("console-down"),s.classList.add("console-input-down"),s.disabled=!1,setTimeout(()=>{s.focus()},100),l()):(a.classList.remove("console-down"),s.classList.remove("console-input-down"),s.disabled=!0)},log(t){console.log(t),r.push({type:"log",message:t}),l()},warn(t){console.warn(t),r.push({type:"warning",message:t}),l()},error(t){throw console.error(t),r.push({type:"error",message:t}),l(),this.toggle(),new Error}}},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var o=n(3),i=(n.n(o),n(2)),r=n(1);const a=o.mat4.create(),s=o.mat4.create(),l=o.mat4.create(),u=o.vec3.fromValues(0,0,0),c=o.vec3.fromValues(0,0,0),d=o.vec3.fromValues(0,0,1);o.mat4.lookAt(a,u,[0,0,1],[0,1,0]);let h=45,f=.1,p=1e3;window.addEventListener("resize",()=>{o.mat4.perspective(s,o.glMatrix.toRadian(h),i.a.canvas.width/i.a.canvas.height,f,p)},!1);const m={position:u,rotation:c,direction:d,viewProjection:l,setProjection(t,e,n){h=t,f=e,p=n,r.a.dispatchEvent("resize")},setPosition(t){o.vec3.copy(u,t)},setRotation(t){o.vec3.copy(c,t)},translate(t){o.vec3.add(u,u,t)},rotate(t){o.vec3.add(c,c,t)},update(){o.mat4.lookAt(a,u,[u[0]+d[0],u[1]+d[1],u[2]+d[2]],[0,1,0]),o.mat4.mul(l,s,a)}}},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromValues=function(t,e,n,i,r,a,s,l,u){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=r,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c},i.set=function(t,e,n,o,i,r,a,s,l,u){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=r,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],o=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=o,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=c*a-s*u,h=-c*r+s*l,f=u*r-a*l,p=n*d+o*h+i*f;return p?(p=1/p,t[0]=d*p,t[1]=(-c*o+i*u)*p,t[2]=(s*o-i*a)*p,t[3]=h*p,t[4]=(c*n-i*l)*p,t[5]=(-s*n+i*r)*p,t[6]=f*p,t[7]=(-u*n+o*l)*p,t[8]=(a*n-o*r)*p,t):null},i.adjoint=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=i*u-o*c,t[2]=o*s-i*a,t[3]=s*l-r*c,t[4]=n*c-i*l,t[5]=i*r-n*s,t[6]=r*u-a*l,t[7]=o*l-n*u,t[8]=n*a-o*r,t},i.determinant=function(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*r-a*l)+n*(-u*i+a*s)+o*(l*i-r*s)},i.multiply=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=n[0],f=n[1],p=n[2],m=n[3],v=n[4],M=n[5],x=n[6],g=n[7],S=n[8];return t[0]=h*o+f*a+p*u,t[1]=h*i+f*s+p*c,t[2]=h*r+f*l+p*d,t[3]=m*o+v*a+M*u,t[4]=m*i+v*s+M*c,t[5]=m*r+v*l+M*d,t[6]=x*o+g*a+S*u,t[7]=x*i+g*s+S*c,t[8]=x*r+g*l+S*d,t},i.mul=i.multiply,i.translate=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=n[0],f=n[1];return t[0]=o,t[1]=i,t[2]=r,t[3]=a,t[4]=s,t[5]=l,t[6]=h*o+f*a+u,t[7]=h*i+f*s+c,t[8]=h*r+f*l+d,t},i.rotate=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=Math.sin(n),f=Math.cos(n);return t[0]=f*o+h*a,t[1]=f*i+h*s,t[2]=f*r+h*l,t[3]=f*a-h*o,t[4]=f*s-h*i,t[5]=f*l-h*r,t[6]=u,t[7]=c,t[8]=d,t},i.scale=function(t,e,n){var o=n[0],i=n[1];return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=-n,t[4]=o,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n+n,s=o+o,l=i+i,u=n*a,c=o*a,d=o*s,h=i*a,f=i*s,p=i*l,m=r*a,v=r*s,M=r*l;return t[0]=1-d-p,t[3]=c-M,t[6]=h+v,t[1]=c+M,t[4]=1-u-p,t[7]=f-m,t[2]=h-v,t[5]=f+m,t[8]=1-u-d,t},i.normalFromMat4=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],v=e[14],M=e[15],x=n*s-o*a,g=n*l-i*a,S=n*u-r*a,y=o*l-i*s,I=o*u-r*s,b=i*u-r*l,D=c*m-d*p,F=c*v-h*p,w=c*M-f*p,E=d*v-h*m,T=d*M-f*m,z=h*M-f*v,P=x*z-g*T+S*E+y*w-I*F+b*D;return P?(P=1/P,t[0]=(s*z-l*T+u*E)*P,t[1]=(l*w-a*z-u*F)*P,t[2]=(a*T-s*w+u*D)*P,t[3]=(i*T-o*z-r*E)*P,t[4]=(n*z-i*w+r*F)*P,t[5]=(o*w-n*T-r*D)*P,t[6]=(m*b-v*I+M*y)*P,t[7]=(v*S-p*b-M*g)*P,t[8]=(p*I-m*S+M*x)*P,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},i.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=e[0],f=e[1],p=e[2],m=e[3],v=e[4],M=e[5],x=t[6],g=e[7],S=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-p)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-m)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-x)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-g)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))},t.exports=i},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new o.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,n){var i=new o.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,n,o){return t[0]=e,t[1]=n,t[2]=o,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},i.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t},i.distance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+o*o+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return n*n+o*o+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],o=t[2];return Math.sqrt(e*e+n*n+o*o)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],o=t[2];return e*e+n*n+o*o},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var n=e[0],o=e[1],i=e[2],r=n*n+o*o+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-r*s,t[1]=r*a-o*l,t[2]=o*s-i*a,t},i.lerp=function(t,e,n,o){var i=e[0],r=e[1],a=e[2];return t[0]=i+o*(n[0]-i),t[1]=r+o*(n[1]-r),t[2]=a+o*(n[2]-a),t},i.hermite=function(t,e,n,o,i,r){var a=r*r,s=a*(2*r-3)+1,l=a*(r-2)+r,u=a*(r-1),c=a*(3-2*r);return t[0]=e[0]*s+n[0]*l+o[0]*u+i[0]*c,t[1]=e[1]*s+n[1]*l+o[1]*u+i[1]*c,t[2]=e[2]*s+n[2]*l+o[2]*u+i[2]*c,t},i.bezier=function(t,e,n,o,i,r){var a=1-r,s=a*a,l=r*r,u=s*a,c=3*r*s,d=3*l*a,h=l*r;return t[0]=e[0]*u+n[0]*c+o[0]*d+i[0]*h,t[1]=e[1]*u+n[1]*c+o[1]*d+i[1]*h,t[2]=e[2]*u+n[2]*c+o[2]*d+i[2]*h,t},i.random=function(t,e){e=e||1;var n=2*o.RANDOM()*Math.PI,i=2*o.RANDOM()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t},i.transformMat4=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[3]*o+n[7]*i+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*o+n[4]*i+n[8]*r+n[12])/a,t[1]=(n[1]*o+n[5]*i+n[9]*r+n[13])/a,t[2]=(n[2]*o+n[6]*i+n[10]*r+n[14])/a,t},i.transformMat3=function(t,e,n){var o=e[0],i=e[1],r=e[2];return t[0]=o*n[0]+i*n[3]+r*n[6],t[1]=o*n[1]+i*n[4]+r*n[7],t[2]=o*n[2]+i*n[5]+r*n[8],t},i.transformQuat=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*o+s*r-l*i,d=u*i+l*o-a*r,h=u*r+a*i-s*o,f=-a*o-s*i-l*r;return t[0]=c*u+f*-a+d*-l-h*-s,t[1]=d*u+f*-s+h*-a-c*-l,t[2]=h*u+f*-l+c*-s-d*-a,t},i.rotateX=function(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[0],r[1]=i[1]*Math.cos(o)-i[2]*Math.sin(o),r[2]=i[1]*Math.sin(o)+i[2]*Math.cos(o),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},i.rotateY=function(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[2]*Math.sin(o)+i[0]*Math.cos(o),r[1]=i[1],r[2]=i[2]*Math.cos(o)-i[0]*Math.sin(o),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},i.rotateZ=function(t,e,n,o){var i=[],r=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],r[0]=i[0]*Math.cos(o)-i[1]*Math.sin(o),r[1]=i[0]*Math.sin(o)+i[1]*Math.cos(o),r[2]=i[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},i.forEach=function(){var t=i.create();return function(e,n,o,i,r,a){var s,l;for(n||(n=3),o||(o=0),l=i?Math.min(i*n+o,e.length):e.length,s=o;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),i.angle=function(t,e){var n=i.fromValues(t[0],t[1],t[2]),o=i.fromValues(e[0],e[1],e[2]);i.normalize(n,n),i.normalize(o,o);var r=i.dot(n,o);return r>1?0:Math.acos(r)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},t.exports=i},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,n,i){var r=new o.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,n,o,i){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t},i.distance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+o*o+i*i+r*r)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2],r=e[3]-t[3];return n*n+o*o+i*i+r*r},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],o=t[2],i=t[3];return Math.sqrt(e*e+n*n+o*o+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],o=t[2],i=t[3];return e*e+n*n+o*o+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n*n+o*o+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=o*a,t[2]=i*a,t[3]=r*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,n,o){var i=e[0],r=e[1],a=e[2],s=e[3];return t[0]=i+o*(n[0]-i),t[1]=r+o*(n[1]-r),t[2]=a+o*(n[2]-a),t[3]=s+o*(n[3]-s),t},i.random=function(t,e){return e=e||1,t[0]=o.RANDOM(),t[1]=o.RANDOM(),t[2]=o.RANDOM(),t[3]=o.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3];return t[0]=n[0]*o+n[4]*i+n[8]*r+n[12]*a,t[1]=n[1]*o+n[5]*i+n[9]*r+n[13]*a,t[2]=n[2]*o+n[6]*i+n[10]*r+n[14]*a,t[3]=n[3]*o+n[7]*i+n[11]*r+n[15]*a,t},i.transformQuat=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*o+s*r-l*i,d=u*i+l*o-a*r,h=u*r+a*i-s*o,f=-a*o-s*i-l*r;return t[0]=c*u+f*-a+d*-l-h*-s,t[1]=d*u+f*-s+h*-a-c*-l,t[2]=h*u+f*-l+c*-s-d*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,n,o,i,r,a){var s,l;for(n||(n=4),o||(o=0),l=i?Math.min(i*n+o,e.length):e.length,s=o;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],r(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t.exports=i},function(t,e,n){"use strict";function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function o(i,r){try{var a=e[i](r),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){o("next",t)},function(t){o("throw",t)});t(s)}return o("next")})}}n.d(e,"a",function(){return p});var i=n(4),r=n(22),a=n(23),s=n(24),l=n(1);let u,c=[];const d={},h="resources/",f=/(?:\.([^.]+))?$/,p={load(t){var e=this;const n=c.length;return c=c.concat(t),0!==n?null:new Promise(t=>{let n=0;u=(new Date).getTime(),s.a.toggle(!0);const m=(()=>{var v=o(function*(){let o=null;const v=c[n],M=h+v,x=f.exec(v)[1];try{const h=yield l.a.fetch(M);switch(x){case"jpg":o=new r.a(h);break;case"obj":o=new a.a(h,e);break;case"list":o=JSON.parse(h).resources,p.load(o)}if(i.a.log('Loaded "'+v+'"'),d[v]=o,++n===c.length){s.a.toggle(!1),c=[];const e=(new Date).getTime()-u;i.a.log("Loaded resources in "+e+"ms"),t()}else m()}catch(t){i.a.log('Error loading "'+v+'": '+t)}});return function(){return v.apply(this,arguments)}})();m()})},get(t){const e=d[t];return e||(i.a.error('Resource "'+t+'" does not exist'),null)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n(1);let i=!0,r=0,a=0,s=0;o.a.addCSS(`\n    #stat-fps { \n        left: 15px; \n        top: 15px; \n        margin: 0; \n        padding: 0; \n        position: absolute; \n        color: #FFF;\n        z-index: 150;\n        font-size: 14px;\n    }\n\n    #stat-ftm { \n        left: 15px; \n        top: 30px; \n        margin: 0; \n        padding: 0; \n        position: absolute; \n        color: #FFF;\n        z-index: 150;\n        font-size: 14px;\n    }\n    `);const l=o.a.addElement("span","stat-fps"),u=o.a.addElement("span","stat-ftm");window.setInterval(()=>{r=a,a=0,document.getElementById("stat-fps").innerHTML="FPS : "+r.toPrecision(5),document.getElementById("stat-ftm").innerHTML="FTM : "+s.toPrecision(5)},1e3);const c={toggle(t){(i=void 0===t?!i:t)?(l.style.display="block",u.style.display="block"):(l.style.display="none",u.style.display="none")},update(t){a++,s=t}}},function(t,e,n){var o;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,r,a,s){"use strict";function l(t,e,n){return setTimeout(f(t,n),e)}function u(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0)}function c(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function d(t,e,n){var o="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=i.console&&(i.console.warn||i.console.log);return r&&r.call(i.console,o,n),t.apply(this,arguments)}}function h(t,e,n){var o,i=e.prototype;(o=t.prototype=Object.create(i)).constructor=t,o._super=i,n&&pt(o,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==Mt?t.apply(e?e[0]||s:s,e):t}function m(t,e){return t===s?e:t}function v(t,e,n){c(S(e),function(e){t.addEventListener(e,n,!1)})}function M(t,e,n){c(S(e),function(e){t.removeEventListener(e,n,!1)})}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function y(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var o=0;o<t.length;){if(n&&t[o][n]==e||!n&&t[o]===e)return o;o++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var o=[],i=[],r=0;r<t.length;){var a=e?t[r][e]:t[r];y(i,a)<0&&o.push(t[r]),i[r]=a,r++}return n&&(o=e?o.sort(function(t,n){return t[e]>n[e]}):o.sort()),o}function D(t,e){for(var n,o,i=e[0].toUpperCase()+e.slice(1),r=0;r<mt.length;){if(n=mt[r],(o=n?n+i:e)in t)return o;r++}return s}function F(){return bt++}function w(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function E(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t){var e=t.options.inputClass;return new(e||(wt?U:Et?j:Ft?W:B))(t,z)}function z(t,e,n){var o=n.pointers.length,i=n.changedPointers.length,r=e&zt&&o-i==0,a=e&(At|_t)&&o-i==0;n.isFirst=!!r,n.isFinal=!!a,r&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,o=e.pointers,i=o.length;n.firstInput||(n.firstInput=R(e)),i>1&&!n.firstMultiple?n.firstMultiple=R(e):1===i&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,s=a?a.center:r.center,l=e.center=O(o);e.timeStamp=St(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=C(s,l),e.distance=N(s,l),A(n,e),e.offsetDirection=k(e.deltaX,e.deltaY);var u=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=gt(u.x)>gt(u.y)?u.x:u.y,e.scale=a?q(a.pointers,o):1,e.rotation=a?Y(a.pointers,o):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,_(n,e);var c=t.element;x(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function A(t,e){var n=e.center,o=t.offsetDelta||{},i=t.prevDelta||{},r=t.prevInput||{};e.eventType!==zt&&r.eventType!==At||(i=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-o.x),e.deltaY=i.y+(n.y-o.y)}function _(t,e){var n,o,i,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=_t&&(l>Tt||a.velocity===s)){var u=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,d=L(l,u,c);o=d.x,i=d.y,n=gt(d.x)>gt(d.y)?d.x:d.y,r=k(u,c),t.lastInterval=e}else n=a.velocity,o=a.velocityX,i=a.velocityY,r=a.direction;e.velocity=n,e.velocityX=o,e.velocityY=i,e.direction=r}function R(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:xt(t.pointers[n].clientX),clientY:xt(t.pointers[n].clientY)},n++;return{timeStamp:St(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:xt(t[0].clientX),y:xt(t[0].clientY)};for(var n=0,o=0,i=0;i<e;)n+=t[i].clientX,o+=t[i].clientY,i++;return{x:xt(n/e),y:xt(o/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function k(t,e){return t===e?Rt:gt(t)>=gt(e)?t<0?Ot:Lt:e<0?kt:Nt}function N(t,e,n){n||(n=Bt);var o=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(o*o+i*i)}function C(t,e,n){n||(n=Bt);var o=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,o)/Math.PI}function Y(t,e){return C(e[1],e[0],Ut)+C(t[1],t[0],Ut)}function q(t,e){return N(e[0],e[1],Ut)/N(t[0],t[1],Ut)}function B(){this.evEl=Xt,this.evWin=jt,this.pressed=!1,E.apply(this,arguments)}function U(){this.evEl=Gt,this.evWin=Zt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Qt,this.evWin=$t,this.started=!1,E.apply(this,arguments)}function X(t,e){var n=I(t.touches),o=I(t.changedTouches);return e&(At|_t)&&(n=b(n.concat(o),"identifier",!0)),[n,o]}function j(){this.evTarget=te,this.targetIds={},E.apply(this,arguments)}function H(t,e){var n=I(t.touches),o=this.targetIds;if(e&(zt|Pt)&&1===n.length)return o[n[0].identifier]=!0,[n,n];var i,r,a=I(t.changedTouches),s=[],l=this.target;if(r=n.filter(function(t){return x(t.target,l)}),e===zt)for(i=0;i<r.length;)o[r[i].identifier]=!0,i++;for(i=0;i<a.length;)o[a[i].identifier]&&s.push(a[i]),e&(At|_t)&&delete o[a[i].identifier],i++;return s.length?[b(r.concat(s),"identifier",!0),s]:void 0}function W(){E.apply(this,arguments);var t=f(this.handler,this);this.touch=new j(this.manager,t),this.mouse=new B(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&zt?(this.primaryTouch=e.changedPointers[0].identifier,Z.call(this,e)):t&(At|_t)&&Z.call(this,e)}function Z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var o=this.lastTouches,i=function(){var t=o.indexOf(n);t>-1&&o.splice(t,1)};setTimeout(i,ee)}}function K(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var i=this.lastTouches[o],r=Math.abs(e-i.x),a=Math.abs(n-i.y);if(r<=ne&&a<=ne)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function $(t){if(g(t,se))return se;var e=g(t,le),n=g(t,ue);return e&&n?se:e||n?e?le:ue:g(t,ae)?ae:re}function J(t){this.options=pt({},this.defaults,t||{}),this.id=F(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ve?"cancel":t&pe?"end":t&fe?"move":t&he?"start":""}function et(t){return t==Nt?"down":t==kt?"up":t==Ot?"left":t==Lt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function ot(){J.apply(this,arguments)}function it(){ot.apply(this,arguments),this.pX=null,this.pY=null}function rt(){ot.apply(this,arguments)}function at(){J.apply(this,arguments),this._timer=null,this._input=null}function st(){ot.apply(this,arguments)}function lt(){ot.apply(this,arguments)}function ut(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=m(e.recognizers,ct.defaults.preset),new dt(t,e)}function dt(t,e){this.options=pt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=T(this),this.touchAction=new Q(this,this.options.touchAction),ht(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var n=t.element;if(n.style){var o;c(t.options.cssProps,function(i,r){o=D(n.style,r),e?(t.oldCssProps[o]=n.style[o],n.style[o]=i):n.style[o]=t.oldCssProps[o]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var pt,mt=["","webkit","Moz","MS","ms","o"],vt=r.createElement("div"),Mt="function",xt=Math.round,gt=Math.abs,St=Date.now;pt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==s&&null!==o)for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e}:Object.assign;var yt=d(function(t,e,n){for(var o=Object.keys(e),i=0;i<o.length;)(!n||n&&t[o[i]]===s)&&(t[o[i]]=e[o[i]]),i++;return t},"extend","Use `assign`."),It=d(function(t,e){return yt(t,e,!0)},"merge","Use `assign`."),bt=1,Dt=/mobile|tablet|ip(ad|hone|od)|android/i,Ft="ontouchstart"in i,wt=D(i,"PointerEvent")!==s,Et=Ft&&Dt.test(navigator.userAgent),Tt=25,zt=1,Pt=2,At=4,_t=8,Rt=1,Ot=2,Lt=4,kt=8,Nt=16,Ct=Ot|Lt,Yt=kt|Nt,qt=Ct|Yt,Bt=["x","y"],Ut=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(w(this.element),this.evWin,this.domHandler)}};var Vt={mousedown:zt,mousemove:Pt,mouseup:At},Xt="mousedown",jt="mousemove mouseup";h(B,E,{handler:function(t){var e=Vt[t.type];e&zt&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=At),this.pressed&&(e&At&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Ht={pointerdown:zt,pointermove:Pt,pointerup:At,pointercancel:_t,pointerout:_t},Wt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Gt="pointerdown",Zt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Gt="MSPointerDown",Zt="MSPointerMove MSPointerUp MSPointerCancel"),h(U,E,{handler:function(t){var e=this.store,n=!1,o=t.type.toLowerCase().replace("ms",""),i=Ht[o],r=Wt[t.pointerType]||t.pointerType,a="touch"==r,s=y(e,t.pointerId,"pointerId");i&zt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(At|_t)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(s,1))}});var Kt={touchstart:zt,touchmove:Pt,touchend:At,touchcancel:_t},Qt="touchstart",$t="touchstart touchmove touchend touchcancel";h(V,E,{handler:function(t){var e=Kt[t.type];if(e===zt&&(this.started=!0),this.started){var n=X.call(this,t,e);e&(At|_t)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Jt={touchstart:zt,touchmove:Pt,touchend:At,touchcancel:_t},te="touchstart touchmove touchend touchcancel";h(j,E,{handler:function(t){var e=Jt[t.type],n=H.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;h(W,E,{handler:function(t,e,n){var o="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)G.call(this,e,n);else if(i&&K.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var oe=D(vt.style,"touchAction"),ie=oe!==s,re="auto",ae="manipulation",se="none",le="pan-x",ue="pan-y",ce=function(){if(!ie)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();Q.prototype={set:function(t){"compute"==t&&(t=this.compute()),ie&&this.manager.element.style&&ce[t]&&(this.manager.element.style[oe]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,i=g(o,se)&&!ce[se],r=g(o,ue)&&!ce[ue],a=g(o,le)&&!ce[le];if(i){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!a||!r)return i||r&&n&Ct||a&&n&Yt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,he=2,fe=4,pe=8,me=pe,ve=16;J.prototype={defaults:{},set:function(t){return pt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,o=this.state;o<pe&&e(n.options.event+tt(o)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),o>=pe&&e(n.options.event+tt(o))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|de)))return!1;t++}return!0},recognize:function(t){var e=pt({},t);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(me|ve|32)&&(this.state=de),this.state=this.process(e),this.state&(he|fe|pe|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},h(ot,J,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,o=e&(he|fe),i=this.attrTest(t);return o&&(n&_t||!i)?e|ve:o||i?n&At?e|pe:e&he?e|fe:he:32}}),h(it,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ct&&e.push(ue),t&Yt&&e.push(le),e},directionTest:function(t){var e=this.options,n=!0,o=t.distance,i=t.direction,r=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ct?(i=0===r?Rt:r<0?Ot:Lt,n=r!=this.pX,o=Math.abs(t.deltaX)):(i=0===a?Rt:a<0?kt:Nt,n=a!=this.pY,o=Math.abs(t.deltaY))),t.direction=i,n&&o>e.threshold&&i&e.direction},attrTest:function(t){return ot.prototype.attrTest.call(this,t)&&(this.state&he||!(this.state&he)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(rt,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&he)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(at,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[re]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!o||!n||t.eventType&(At|_t)&&!i)this.reset();else if(t.eventType&zt)this.reset(),this._timer=l(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&At)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&At?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=St(),this.manager.emit(this.options.event,this._input)))}}),h(st,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&he)}}),h(lt,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ct|Yt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ct|Yt)?e=t.overallVelocity:n&Ct?e=t.overallVelocityX:n&Yt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&At},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(ut,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&zt&&0===this.count)return this.failTimeout();if(o&&i&&n){if(t.eventType!=At)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=me,this.tryEmit()},e.interval,this),he):me}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[rt,{enable:!1},["rotate"]],[lt,{direction:Ct}],[it,{direction:Ct},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};dt.prototype={set:function(t){return pt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,o=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&me)&&(i=e.curRecognizer=null);for(var r=0;r<o.length;)n=o[r],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(he|fe|pe)&&(i=e.curRecognizer=n),r++}},get:function(t){if(t instanceof J)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=y(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return c(S(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return c(S(t),function(t){e?n[t]&&n[t].splice(y(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](e),o++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pt(ct,{INPUT_START:zt,INPUT_MOVE:Pt,INPUT_END:At,INPUT_CANCEL:_t,STATE_POSSIBLE:de,STATE_BEGAN:he,STATE_CHANGED:fe,STATE_ENDED:pe,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Rt,DIRECTION_LEFT:Ot,DIRECTION_RIGHT:Lt,DIRECTION_UP:kt,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:Ct,DIRECTION_VERTICAL:Yt,DIRECTION_ALL:qt,Manager:dt,Input:E,TouchAction:Q,TouchInput:j,MouseInput:B,PointerEventInput:U,TouchMouseInput:W,SingleTouchInput:V,Recognizer:J,AttrRecognizer:ot,Tap:ut,Pan:it,Swipe:lt,Pinch:rt,Rotate:st,Press:at,on:v,off:M,each:c,merge:It,extend:yt,assign:pt,inherit:h,bindFn:f,prefixed:D}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=ct,(o=function(){return ct}.call(e,n,e,t))!==s&&(t.exports=o)}(window,document)},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var o=n(11),i=n.n(o),r=n(26),a=n.n(r),s=n(1),l=n(2),u=n(13);s.a.addCSS(`\n    .hide-cursor {\n        cursor: none;\n    }\n\n    #virtual-cursor {\n        position: absolute;\n        display: block;\n        width: 50px;\n        height: 50px;\n        marginLeft: -25px;\n        marginTop: -25px;\n        background: white;\n        opacity: 0;\n        border-radius: 50%;\n        z-index : 25;\n    }\n\n    @-webkit-keyframes virtual-cursor-fadein {\n        from { opacity: 0; }\n        to   { opacity: 0.5; }\n    }\n\n    .virtual-cursor-fadein {\n        -webkit-animation: virtual-cursor-fadein .1s ease-in 1 forwards;\n    }\n\n    @-webkit-keyframes virtual-cursor-fadeout {\n        from { opacity: 0.5; }\n        to   { opacity: 0; }\n    }\n\n    .virtual-cursor-fadeout {\n        -webkit-animation: virtual-cursor-fadeout .1s ease-in 1 forwards;\n    }\n\n    #move-div {\n        width: 200px;\n        height: calc(100% - 100px);\n        left: 0px;\n        bottom: 0px;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        z-index : 50;\n        visibility :hidden;\n    }\n\n    #look-div {\n        width: calc(100% - 200px);\n        height: calc(100% - 100px);\n        right: 0px;\n        bottom: 0px;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        z-index : 50;\n        opacity: 0.01;\n    }\n\n    #console-div {\n        width: 100%;\n        height: 100px;\n        right: 0px;\n        top: 0px;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        z-index : 50;\n        opacity: 0.01;\n    }\n\n    .show-joystick {\n        visibility: visible;\n    }\n    `);let c,d=!0,h={x:0,y:0},f={},p=[],m=[];if(window.addEventListener("keyup",t=>{delete f[t.keyCode];for(let e=0;e<p.length;e++)p[e].key===t.keyCode&&p[e].event();for(let t=0;t<m.length;t++)m[t].pressed&&(m[t].pressed=!1)},!1),window.addEventListener("keydown",t=>{f[t.keyCode]=!0;for(let e=0;e<m.length;e++)m[e].key!==t.keyCode||m[e].pressed||(m[e].event(),m[e].pressed=!0)},!1),window.addEventListener("mousemove",t=>{h={x:t.movementX,y:t.movementY},void 0!==c&&window.clearTimeout(c),c=window.setTimeout(()=>{h={x:0,y:0}},50)},!1),s.a.isMobile()){const t=s.a.addElement("div","virtual-cursor"),e=s.a.addElement("div","look-div"),n=new i.a(e,{touchAction:"auto"});n.get("pan").set({direction:i.a.DIRECTION_ALL}),n.on("panstart panmove panend",e=>{h={x:0,y:0},"panmove"===e.type&&(h={x:16*e.velocityX*u.a.looksensitivity,y:16*e.velocityY*u.a.looksensitivity},e.pointers&&e.pointers[0]&&(t.style.left=e.pointers[0].clientX-25+"px",t.style.top=e.pointers[0].clientY-25+"px")),"panstart"===e.type&&(t.classList.add("virtual-cursor-fadein"),t.classList.remove("virtual-cursor-fadeout")),"panend"===e.type&&(t.classList.remove("virtual-cursor-fadein"),t.classList.add("virtual-cursor-fadeout"))});const o=s.a.addElement("div","move-div");a.a.create({zone:o,mode:"static",position:{left:"80px",bottom:"80px"},color:"white"}).on("move",(t,e)=>{if(e.angle&&e.distance&&e.distance>20){delete f[u.a.forward],delete f[u.a.backwards],delete f[u.a.left],delete f[u.a.right];const t=e.angle.degree;(t>=337.5&&t<360||t>=0&&t<22.5)&&(f[u.a.right]=!0),t>=22.5&&t<67.5&&(f[u.a.right]=!0,f[u.a.forward]=!0),t>=67.5&&t<112.5&&(f[u.a.forward]=!0),t>=112.5&&t<157.5&&(f[u.a.forward]=!0,f[u.a.left]=!0),t>=157.5&&t<202.5&&(f[u.a.left]=!0),t>=202.5&&t<247.5&&(f[u.a.left]=!0,f[u.a.backwards]=!0),t>=247.5&&t<292.5&&(f[u.a.backwards]=!0),t>=292.5&&t<337.5&&(f[u.a.backwards]=!0,f[u.a.right]=!0)}}).on("end",()=>{delete f[u.a.forward],delete f[u.a.backwards],delete f[u.a.left],delete f[u.a.right]}),o.firstChild.classList.add("show-joystick")}const v={cursorMovement:()=>h,toggleCursor(t){(d=void 0===t?!d:t)?(document.body.classList.remove("hide-cursor"),document.exitPointerLock()):(document.body.classList.add("hide-cursor"),l.a.canvas.requestPointerLock())},clearInputEvents(){f={},p=[],m=[]},addKeyDownEvent(t,e){m.push({key:t,event:e,pressed:!1})},addKeyUpEvent(t,e){p.push({key:t,event:e})},isDown:t=>f[t]}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});const o={forward:87,backwards:83,left:65,right:68,movespeed:5,looksensitivity:5}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n(4);const i=n(2).a.gl;class r{constructor(t,e){const n=this;n.vertexShader=i.createShader(i.VERTEX_SHADER),n.fragmentShader=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(n.vertexShader,t),i.shaderSource(n.fragmentShader,e),i.compileShader(n.vertexShader),i.getShaderParameter(n.vertexShader,i.COMPILE_STATUS)||o.a.error("Error compiling vertex shader: "+i.getShaderInfoLog(n.vertexShader)),i.compileShader(n.fragmentShader),i.getShaderParameter(n.fragmentShader,i.COMPILE_STATUS)||o.a.error("Error compiling fragment shader: "+i.getShaderInfoLog(n.fragmentShader)),n.program=i.createProgram(),i.attachShader(n.program,n.vertexShader),i.attachShader(n.program,n.fragmentShader),i.linkProgram(n.program),i.getProgramParameter(n.program,i.LINK_STATUS)||o.a.error("Error linking program: "+i.getProgramInfoLog(n.program)),i.validateProgram(n.program),i.getProgramParameter(n.program,i.VALIDATE_STATUS)||o.a.error("Error validating program: "+i.getProgramInfoLog(n.program))}bind(){i.useProgram(this.program)}unBind(){i.useProgram(null)}setMat4(t,e){i.uniformMatrix4fv(i.getUniformLocation(this.program,t),i.FALSE,e)}setVec2(t,e){i.uniform2f(i.getUniformLocation(this.program,t),e[0],e[1])}setVec3(t,e){i.uniform3f(i.getUniformLocation(this.program,t),e[0],e[1],e[2])}setVec4(t,e){i.uniform4f(i.getUniformLocation(this.program,t),e[0],e[1],e[2],e[3])}}const a={diffuse:new r(`   #version 300 es\n\n        precision mediump float;\n\n        layout(location=0) in vec3 vertPosition;\n        layout(location=1) in vec2 vertTexCoord;\n        layout(location=2) in vec3 vertNormal;\n\n        out vec2 fragTexCoord;\n        out vec3 fragNormal;\n\n        uniform mat4 matWorld;\n        uniform mat4 matViewProj;\n\n        void main()\n        {\n            fragTexCoord = vertTexCoord; \n            fragNormal = (matWorld * vec4(vertNormal, 0.0)).xyz;\n            gl_Position = matViewProj * matWorld * vec4(vertPosition, 1.0);\n        }`,`   #version 300 es\n\n        precision mediump float;\n\n        struct DirectionalLight \n        { \n            vec3 direction;\n            vec3 diffuse;\n            vec3 ambient;\n        }; \n\n        in vec2 fragTexCoord;\n        in vec3 fragNormal;\n\n        out vec4 fragmentColor;\n\n        uniform DirectionalLight sun;\n        uniform sampler2D sampler;\n\n        void main()\n        {\n            vec3 surfaceNormal = normalize(fragNormal);\n            vec3 normSunDir = normalize(sun.direction);\n            vec4 texel = texture(sampler, fragTexCoord);\n            vec3 lightIntensity = sun.ambient + sun.diffuse * max(dot(fragNormal, normSunDir), 0.0);\n            fragmentColor = vec4(texel.rgb * lightIntensity, texel.a);\n        }`),sky:new r(`   #version 300 es\n        precision mediump float;\n\n        layout(location=0) in vec3 vertPosition;\n        layout(location=1) in vec2 vertTexCoord;\n\n        out vec2 fragTexCoord;\n\n        uniform mat4 matWorld;\n        uniform mat4 matViewProj;\n\n        void main()\n        {\n            fragTexCoord = vertTexCoord; \n            gl_Position = matViewProj * matWorld * vec4(vertPosition, 1.0);\n        }`,`   #version 300 es\n        precision mediump float;\n\n        in vec2 fragTexCoord;\n\n        out vec4 fragmentColor;\n\n        uniform sampler2D sampler;\n\n        void main()\n        {\n            fragmentColor = texture(sampler, fragTexCoord);\n        }`)}},function(t,e,n){t.exports=n(16)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=(n.n(o),n(1)),r=n(9),a=n(10),s=n(5),l=n(25),u=n(2),c=n(14),d=n(12),h=n(27);i.a.addCSS(`\n    html { \n        height: 100%; \n    }\n\n    body { \n        background: #000; \n        min-height: 100%; \n        margin: 0; \n        padding: 0; \n        position: relative; \n        overflow: hidden; \n        font-family: Consolas, monaco, monospace; font-weight: bold;\n    }\n    `),function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function o(i,r){try{var a=e[i](r),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){o("next",t)},function(t){o("throw",t)});t(s)}return o("next")})}}(function*(){yield r.a.load(["skyboxes/skybox.obj","meshes/statue.obj","meshes/floor.obj","skyboxes/1/1.list"]);let t,e=0;const n=u.a.gl,i=r.a.get("meshes/statue.obj"),f=r.a.get("meshes/floor.obj");h.a.setTextures(r.a.get("skyboxes/1/1.list")),s.a.setProjection(45,.1,1e3),s.a.setPosition([0,1,-5]),d.a.toggleCursor(!1);const p=o.mat4.create(),m=o.mat4.create();o.mat4.identity(m),o.mat4.identity(p),o.mat4.rotate(p,m,o.glMatrix.toRadian(180),[0,1,0]);const v=function(){const o=performance.now();e=o-(t||o),t=o,l.a.update(e),s.a.update(),n.clear(n.DEPTH_BUFFER_BIT||n.COLOR_BUFFER_BIT),h.a.render(),c.a.diffuse.bind(),c.a.diffuse.setVec3("sun.direction",[-3,4,-2]),c.a.diffuse.setVec3("sun.ambient",[.2,.2,.2]),c.a.diffuse.setVec3("sun.diffuse",[.9,.9,.9]),c.a.diffuse.setMat4("matWorld",p),c.a.diffuse.setMat4("matViewProj",s.a.viewProjection),f.render(),i.render(),a.a.update(e),window.requestAnimationFrame(v)};window.requestAnimationFrame(v)})()},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.fromValues=function(t,e,n,i){var r=new o.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r},i.set=function(t,e,n,o,i){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t},i.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n*r-i*o;return a?(a=1/a,t[0]=r*a,t[1]=-o*a,t[2]=-i*a,t[3]=n*a,t):null},i.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=o*s+r*l,t[1]=i*s+a*l,t[2]=o*u+r*c,t[3]=i*u+a*c,t},i.mul=i.multiply,i.rotate=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=o*l+r*s,t[1]=i*l+a*s,t[2]=o*-s+r*l,t[3]=i*-s+a*l,t},i.scale=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=n[0],l=n[1];return t[0]=o*s,t[1]=i*s,t[2]=r*l,t[3]=a*l,t},i.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=-n,t[3]=o,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,n,o){return t[2]=o[2]/o[0],n[0]=o[0],n[1]=o[1],n[3]=o[3]-t[2]*n[1],[t,e,n]},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t},t.exports=i},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.fromValues=function(t,e,n,i,r,a){var s=new o.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=r,s[5]=a,s},i.set=function(t,e,n,o,i,r,a){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=r,t[5]=a,t},i.invert=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=n*r-o*i;return l?(l=1/l,t[0]=r*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-r*a)*l,t[5]=(o*a-n*s)*l,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1],d=n[2],h=n[3],f=n[4],p=n[5];return t[0]=o*u+r*c,t[1]=i*u+a*c,t[2]=o*d+r*h,t[3]=i*d+a*h,t[4]=o*f+r*p+s,t[5]=i*f+a*p+l,t},i.mul=i.multiply,i.rotate=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=o*c+r*u,t[1]=i*c+a*u,t[2]=o*-u+r*c,t[3]=i*-u+a*c,t[4]=s,t[5]=l,t},i.scale=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=o*u,t[1]=i*u,t[2]=r*c,t[3]=a*c,t[4]=s,t[5]=l,t},i.translate=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=o,t[1]=i,t[2]=r,t[3]=a,t[4]=o*u+r*c+s,t[5]=i*u+a*c+l,t},i.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=-n,t[3]=o,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},i.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],u=e[0],c=e[1],d=e[2],h=e[3],f=e[4],p=e[5];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-f)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(l-p)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))},t.exports=i},function(t,e,n){var o=n(0),i={scalar:{},SIMD:{}};i.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.fromValues=function(t,e,n,i,r,a,s,l,u,c,d,h,f,p,m,v){var M=new o.ARRAY_TYPE(16);return M[0]=t,M[1]=e,M[2]=n,M[3]=i,M[4]=r,M[5]=a,M[6]=s,M[7]=l,M[8]=u,M[9]=c,M[10]=d,M[11]=h,M[12]=f,M[13]=p,M[14]=m,M[15]=v,M},i.set=function(t,e,n,o,i,r,a,s,l,u,c,d,h,f,p,m,v){return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=r,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=d,t[11]=h,t[12]=f,t[13]=p,t[14]=m,t[15]=v,t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.scalar.transpose=function(t,e){if(t===e){var n=e[1],o=e[2],i=e[3],r=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=r,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.SIMD.transpose=function(t,e){var n,o,i,r,a,s,l,u,c,d;return n=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),r=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.shuffle(n,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,r,0,1,4,5),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),u=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,u),a=SIMD.Float32x4.shuffle(n,o,2,3,6,7),s=SIMD.Float32x4.shuffle(i,r,2,3,6,7),c=SIMD.Float32x4.shuffle(a,s,0,2,4,6),d=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,d),t},i.transpose=o.USE_SIMD?i.SIMD.transpose:i.scalar.transpose,i.scalar.invert=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],v=e[14],M=e[15],x=n*s-o*a,g=n*l-i*a,S=n*u-r*a,y=o*l-i*s,I=o*u-r*s,b=i*u-r*l,D=c*m-d*p,F=c*v-h*p,w=c*M-f*p,E=d*v-h*m,T=d*M-f*m,z=h*M-f*v,P=x*z-g*T+S*E+y*w-I*F+b*D;return P?(P=1/P,t[0]=(s*z-l*T+u*E)*P,t[1]=(i*T-o*z-r*E)*P,t[2]=(m*b-v*I+M*y)*P,t[3]=(h*I-d*b-f*y)*P,t[4]=(l*w-a*z-u*F)*P,t[5]=(n*z-i*w+r*F)*P,t[6]=(v*S-p*b-M*g)*P,t[7]=(c*b-h*S+f*g)*P,t[8]=(a*T-s*w+u*D)*P,t[9]=(o*w-n*T-r*D)*P,t[10]=(p*I-m*S+M*x)*P,t[11]=(d*S-c*I-f*x)*P,t[12]=(s*F-a*E-l*D)*P,t[13]=(n*E-o*F+i*D)*P,t[14]=(m*g-p*y-v*x)*P,t[15]=(c*y-d*g+h*x)*P,t):null},i.SIMD.invert=function(t,e){var n,o,i,r,a,s,l,u,c,d,h=SIMD.Float32x4.load(e,0),f=SIMD.Float32x4.load(e,4),p=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return a=SIMD.Float32x4.shuffle(h,f,0,1,4,5),o=SIMD.Float32x4.shuffle(p,m,0,1,4,5),n=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.shuffle(h,f,2,3,6,7),r=SIMD.Float32x4.shuffle(p,m,2,3,6,7),i=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.mul(i,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(o,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),c),d=SIMD.Float32x4.mul(n,s),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d),a=SIMD.Float32x4.reciprocalApproximation(d),d=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(a,a))),(d=SIMD.Float32x4.swizzle(d,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(d,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(d,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(d,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(d,c)),t):null},i.invert=o.USE_SIMD?i.SIMD.invert:i.scalar.invert,i.scalar.adjoint=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],v=e[14],M=e[15];return t[0]=s*(h*M-f*v)-d*(l*M-u*v)+m*(l*f-u*h),t[1]=-(o*(h*M-f*v)-d*(i*M-r*v)+m*(i*f-r*h)),t[2]=o*(l*M-u*v)-s*(i*M-r*v)+m*(i*u-r*l),t[3]=-(o*(l*f-u*h)-s*(i*f-r*h)+d*(i*u-r*l)),t[4]=-(a*(h*M-f*v)-c*(l*M-u*v)+p*(l*f-u*h)),t[5]=n*(h*M-f*v)-c*(i*M-r*v)+p*(i*f-r*h),t[6]=-(n*(l*M-u*v)-a*(i*M-r*v)+p*(i*u-r*l)),t[7]=n*(l*f-u*h)-a*(i*f-r*h)+c*(i*u-r*l),t[8]=a*(d*M-f*m)-c*(s*M-u*m)+p*(s*f-u*d),t[9]=-(n*(d*M-f*m)-c*(o*M-r*m)+p*(o*f-r*d)),t[10]=n*(s*M-u*m)-a*(o*M-r*m)+p*(o*u-r*s),t[11]=-(n*(s*f-u*d)-a*(o*f-r*d)+c*(o*u-r*s)),t[12]=-(a*(d*v-h*m)-c*(s*v-l*m)+p*(s*h-l*d)),t[13]=n*(d*v-h*m)-c*(o*v-i*m)+p*(o*h-i*d),t[14]=-(n*(s*v-l*m)-a*(o*v-i*m)+p*(o*l-i*s)),t[15]=n*(s*h-l*d)-a*(o*h-i*d)+c*(o*l-i*s),t},i.SIMD.adjoint=function(t,e){var n,o,i,r,a,s,l,u,c,d=SIMD.Float32x4.load(e,0),h=SIMD.Float32x4.load(e,4),f=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return a=SIMD.Float32x4.shuffle(d,h,0,1,4,5),o=SIMD.Float32x4.shuffle(f,p,0,1,4,5),n=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.shuffle(d,h,2,3,6,7),r=SIMD.Float32x4.shuffle(f,p,2,3,6,7),i=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.mul(i,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(o,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),c),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),SIMD.Float32x4.store(t,8,u),SIMD.Float32x4.store(t,12,c),t},i.adjoint=o.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint,i.determinant=function(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],v=t[15];return(e*a-n*r)*(d*v-h*m)-(e*s-o*r)*(c*v-h*p)+(e*l-i*r)*(c*m-d*p)+(n*s-o*a)*(u*v-h*f)-(n*l-i*a)*(u*m-d*f)+(o*l-i*s)*(u*p-c*f)},i.SIMD.multiply=function(t,e,n){var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(t,0,l);var u=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(t,4,c);var d=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));SIMD.Float32x4.store(t,8,h);var f=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),r),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));return SIMD.Float32x4.store(t,12,p),t},i.scalar.multiply=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],v=e[13],M=e[14],x=e[15],g=n[0],S=n[1],y=n[2],I=n[3];return t[0]=g*o+S*s+y*d+I*m,t[1]=g*i+S*l+y*h+I*v,t[2]=g*r+S*u+y*f+I*M,t[3]=g*a+S*c+y*p+I*x,g=n[4],S=n[5],y=n[6],I=n[7],t[4]=g*o+S*s+y*d+I*m,t[5]=g*i+S*l+y*h+I*v,t[6]=g*r+S*u+y*f+I*M,t[7]=g*a+S*c+y*p+I*x,g=n[8],S=n[9],y=n[10],I=n[11],t[8]=g*o+S*s+y*d+I*m,t[9]=g*i+S*l+y*h+I*v,t[10]=g*r+S*u+y*f+I*M,t[11]=g*a+S*c+y*p+I*x,g=n[12],S=n[13],y=n[14],I=n[15],t[12]=g*o+S*s+y*d+I*m,t[13]=g*i+S*l+y*h+I*v,t[14]=g*r+S*u+y*f+I*M,t[15]=g*a+S*c+y*p+I*x,t},i.multiply=o.USE_SIMD?i.SIMD.multiply:i.scalar.multiply,i.mul=i.multiply,i.scalar.translate=function(t,e,n){var o,i,r,a,s,l,u,c,d,h,f,p,m=n[0],v=n[1],M=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*M+e[12],t[13]=e[1]*m+e[5]*v+e[9]*M+e[13],t[14]=e[2]*m+e[6]*v+e[10]*M+e[14],t[15]=e[3]*m+e[7]*v+e[11]*M+e[15]):(o=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=o,t[1]=i,t[2]=r,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=o*m+s*v+d*M+e[12],t[13]=i*m+l*v+h*M+e[13],t[14]=r*m+u*v+f*M+e[14],t[15]=a*m+c*v+p*M+e[15]),t},i.SIMD.translate=function(t,e,n){var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,0,0,0,0)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,1,1,1,1)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,SIMD.Float32x4.add(r,a)));return SIMD.Float32x4.store(t,12,l),t},i.translate=o.USE_SIMD?i.SIMD.translate:i.scalar.translate,i.scalar.scale=function(t,e,n){var o=n[0],i=n[1],r=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.SIMD.scale=function(t,e,n){var o,i,r,a=SIMD.Float32x4(n[0],n[1],n[2],0);return o=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,0,0,0,0))),i=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,1,1,1,1))),r=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.scale=o.USE_SIMD?i.SIMD.scale:i.scalar.scale,i.rotate=function(t,e,n,i){var r,a,s,l,u,c,d,h,f,p,m,v,M,x,g,S,y,I,b,D,F,w,E,T,z=i[0],P=i[1],A=i[2],_=Math.sqrt(z*z+P*P+A*A);return Math.abs(_)<o.EPSILON?null:(_=1/_,z*=_,P*=_,A*=_,r=Math.sin(n),a=Math.cos(n),s=1-a,l=e[0],u=e[1],c=e[2],d=e[3],h=e[4],f=e[5],p=e[6],m=e[7],v=e[8],M=e[9],x=e[10],g=e[11],S=z*z*s+a,y=P*z*s+A*r,I=A*z*s-P*r,b=z*P*s-A*r,D=P*P*s+a,F=A*P*s+z*r,w=z*A*s+P*r,E=P*A*s-z*r,T=A*A*s+a,t[0]=l*S+h*y+v*I,t[1]=u*S+f*y+M*I,t[2]=c*S+p*y+x*I,t[3]=d*S+m*y+g*I,t[4]=l*b+h*D+v*F,t[5]=u*b+f*D+M*F,t[6]=c*b+p*D+x*F,t[7]=d*b+m*D+g*F,t[8]=l*w+h*E+v*T,t[9]=u*w+f*E+M*T,t[10]=c*w+p*E+x*T,t[11]=d*w+m*E+g*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.scalar.rotateX=function(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+u*o,t[5]=a*i+c*o,t[6]=s*i+d*o,t[7]=l*i+h*o,t[8]=u*i-r*o,t[9]=c*i-a*o,t[10]=d*i-s*o,t[11]=h*i-l*o,t},i.SIMD.rotateX=function(t,e,n){var o=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),SIMD.Float32x4.mul(a,o))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(r,o))),t},i.rotateX=o.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX,i.scalar.rotateY=function(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-u*o,t[1]=a*i-c*o,t[2]=s*i-d*o,t[3]=l*i-h*o,t[8]=r*o+u*i,t[9]=a*o+c*i,t[10]=s*o+d*i,t[11]=l*o+h*i,t},i.SIMD.rotateY=function(t,e,n){var o=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),SIMD.Float32x4.mul(a,o))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),SIMD.Float32x4.mul(a,i))),t},i.rotateY=o.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY,i.scalar.rotateZ=function(t,e,n){var o=Math.sin(n),i=Math.cos(n),r=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+u*o,t[1]=a*i+c*o,t[2]=s*i+d*o,t[3]=l*i+h*o,t[4]=u*i-r*o,t[5]=c*i-a*o,t[6]=d*i-s*o,t[7]=h*i-l*o,t},i.SIMD.rotateZ=function(t,e,n){var o=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),SIMD.Float32x4.mul(a,o))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(r,o))),t},i.rotateZ=o.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ,i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,n){var i,r,a,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<o.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,i=Math.sin(e),r=Math.cos(e),a=1-r,t[0]=s*s*a+r,t[1]=l*s*a+u*i,t[2]=u*s*a-l*i,t[3]=0,t[4]=s*l*a-u*i,t[5]=l*l*a+r,t[6]=u*l*a+s*i,t[7]=0,t[8]=s*u*a+l*i,t[9]=l*u*a-s*i,t[10]=u*u*a+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=o+o,l=i+i,u=r+r,c=o*s,d=o*l,h=o*u,f=i*l,p=i*u,m=r*u,v=a*s,M=a*l,x=a*u;return t[0]=1-(f+m),t[1]=d+x,t[2]=h-M,t[3]=0,t[4]=d-x,t[5]=1-(c+m),t[6]=p+v,t[7]=0,t[8]=h+M,t[9]=p-v,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},i.getRotation=function(t,e){var n=e[0]+e[5]+e[10],o=0;return n>0?(o=2*Math.sqrt(n+1),t[3]=.25*o,t[0]=(e[6]-e[9])/o,t[1]=(e[8]-e[2])/o,t[2]=(e[1]-e[4])/o):e[0]>e[5]&e[0]>e[10]?(o=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/o,t[0]=.25*o,t[1]=(e[1]+e[4])/o,t[2]=(e[8]+e[2])/o):e[5]>e[10]?(o=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/o,t[0]=(e[1]+e[4])/o,t[1]=.25*o,t[2]=(e[6]+e[9])/o):(o=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/o,t[0]=(e[8]+e[2])/o,t[1]=(e[6]+e[9])/o,t[2]=.25*o),t},i.fromRotationTranslationScale=function(t,e,n,o){var i=e[0],r=e[1],a=e[2],s=e[3],l=i+i,u=r+r,c=a+a,d=i*l,h=i*u,f=i*c,p=r*u,m=r*c,v=a*c,M=s*l,x=s*u,g=s*c,S=o[0],y=o[1],I=o[2];return t[0]=(1-(p+v))*S,t[1]=(h+g)*S,t[2]=(f-x)*S,t[3]=0,t[4]=(h-g)*y,t[5]=(1-(d+v))*y,t[6]=(m+M)*y,t[7]=0,t[8]=(f+x)*I,t[9]=(m-M)*I,t[10]=(1-(d+p))*I,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,n,o,i){var r=e[0],a=e[1],s=e[2],l=e[3],u=r+r,c=a+a,d=s+s,h=r*u,f=r*c,p=r*d,m=a*c,v=a*d,M=s*d,x=l*u,g=l*c,S=l*d,y=o[0],I=o[1],b=o[2],D=i[0],F=i[1],w=i[2];return t[0]=(1-(m+M))*y,t[1]=(f+S)*y,t[2]=(p-g)*y,t[3]=0,t[4]=(f-S)*I,t[5]=(1-(h+M))*I,t[6]=(v+x)*I,t[7]=0,t[8]=(p+g)*b,t[9]=(v-x)*b,t[10]=(1-(h+m))*b,t[11]=0,t[12]=n[0]+D-(t[0]*D+t[4]*F+t[8]*w),t[13]=n[1]+F-(t[1]*D+t[5]*F+t[9]*w),t[14]=n[2]+w-(t[2]*D+t[6]*F+t[10]*w),t[15]=1,t},i.fromQuat=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n+n,s=o+o,l=i+i,u=n*a,c=o*a,d=o*s,h=i*a,f=i*s,p=i*l,m=r*a,v=r*s,M=r*l;return t[0]=1-d-p,t[1]=c+M,t[2]=h-v,t[3]=0,t[4]=c-M,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=h+v,t[9]=f-m,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,n,o,i,r,a){var s=1/(n-e),l=1/(i-o),u=1/(r-a);return t[0]=2*r*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+o)*l,t[10]=(a+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r*2*u,t[15]=0,t},i.perspective=function(t,e,n,o,i){var r=1/Math.tan(e/2),a=1/(o-i);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+o)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*o*a,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,n,o){var i=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(i-r)*u*.5,t[10]=o/(n-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n/(n-o),t[15]=0,t},i.ortho=function(t,e,n,o,i,r,a){var s=1/(e-n),l=1/(o-i),u=1/(r-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+o)*l,t[14]=(a+r)*u,t[15]=1,t},i.lookAt=function(t,e,n,r){var a,s,l,u,c,d,h,f,p,m,v=e[0],M=e[1],x=e[2],g=r[0],S=r[1],y=r[2],I=n[0],b=n[1],D=n[2];return Math.abs(v-I)<o.EPSILON&&Math.abs(M-b)<o.EPSILON&&Math.abs(x-D)<o.EPSILON?i.identity(t):(h=v-I,f=M-b,p=x-D,m=1/Math.sqrt(h*h+f*f+p*p),h*=m,f*=m,p*=m,a=S*p-y*f,s=y*h-g*p,l=g*f-S*h,(m=Math.sqrt(a*a+s*s+l*l))?(a*=m=1/m,s*=m,l*=m):(a=0,s=0,l=0),u=f*l-p*s,c=p*a-h*l,d=h*s-f*a,(m=Math.sqrt(u*u+c*c+d*d))?(u*=m=1/m,c*=m,d*=m):(u=0,c=0,d=0),t[0]=a,t[1]=u,t[2]=h,t[3]=0,t[4]=s,t[5]=c,t[6]=f,t[7]=0,t[8]=l,t[9]=d,t[10]=p,t[11]=0,t[12]=-(a*v+s*M+l*x),t[13]=-(u*v+c*M+d*x),t[14]=-(h*v+f*M+p*x),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},i.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t[9]=e[9]+n[9]*o,t[10]=e[10]+n[10]*o,t[11]=e[11]+n[11]*o,t[12]=e[12]+n[12]*o,t[13]=e[13]+n[13]*o,t[14]=e[14]+n[14]*o,t[15]=e[15]+n[15]*o,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},i.equals=function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],v=t[13],M=t[14],x=t[15],g=e[0],S=e[1],y=e[2],I=e[3],b=e[4],D=e[5],F=e[6],w=e[7],E=e[8],T=e[9],z=e[10],P=e[11],A=e[12],_=e[13],R=e[14],O=e[15];return Math.abs(n-g)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-S)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-y)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-I)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-D)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(u-F)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(c-w)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(d-E)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(h-T)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(f-z)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(p-P)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-A)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(v-_)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(_))&&Math.abs(M-R)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(x-O)<=o.EPSILON*Math.max(1,Math.abs(x),Math.abs(O))},t.exports=i},function(t,e,n){var o=n(0),i=n(6),r=n(7),a=n(8),s={};s.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),n=r.fromValues(0,1,0);return function(o,i,a){var l=r.dot(i,a);return l<-.999999?(r.cross(t,e,i),r.length(t)<1e-6&&r.cross(t,n,i),r.normalize(t,t),s.setAxisAngle(o,t,Math.PI),o):l>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):(r.cross(t,i,a),o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=1+l,s.normalize(o,o))}}(),s.setAxes=function(){var t=i.create();return function(e,n,o,i){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n*=.5;var o=Math.sin(n);return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=Math.cos(n),t},s.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),o=Math.sin(n/2);return 0!=o?(t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o):(t[0]=1,t[1]=0,t[2]=0),n},s.add=a.add,s.multiply=function(t,e,n){var o=e[0],i=e[1],r=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=o*c+a*s+i*u-r*l,t[1]=i*c+a*l+r*s-o*u,t[2]=r*c+a*u+o*l-i*s,t[3]=a*c-o*s-i*l-r*u,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var o=e[0],i=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=o*l+a*s,t[1]=i*l+r*s,t[2]=r*l-i*s,t[3]=a*l-o*s,t},s.rotateY=function(t,e,n){n*=.5;var o=e[0],i=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=o*l-r*s,t[1]=i*l+a*s,t[2]=r*l+o*s,t[3]=a*l-i*s,t},s.rotateZ=function(t,e,n){n*=.5;var o=e[0],i=e[1],r=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=o*l+i*s,t[1]=i*l-o*s,t[2]=r*l+a*s,t[3]=a*l-r*s,t},s.calculateW=function(t,e){var n=e[0],o=e[1],i=e[2];return t[0]=n,t[1]=o,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-o*o-i*i)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,o){var i,r,a,s,l,u=e[0],c=e[1],d=e[2],h=e[3],f=n[0],p=n[1],m=n[2],v=n[3];return(r=u*f+c*p+d*m+h*v)<0&&(r=-r,f=-f,p=-p,m=-m,v=-v),1-r>1e-6?(i=Math.acos(r),a=Math.sin(i),s=Math.sin((1-o)*i)/a,l=Math.sin(o*i)/a):(s=1-o,l=o),t[0]=s*u+l*f,t[1]=s*c+l*p,t[2]=s*d+l*m,t[3]=s*h+l*v,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,o,i,r,a,l){return s.slerp(t,o,a,l),s.slerp(e,i,r,l),s.slerp(n,t,e,2*l*(1-l)),n}}(),s.invert=function(t,e){var n=e[0],o=e[1],i=e[2],r=e[3],a=n*n+o*o+i*i+r*r,s=a?1/a:0;return t[0]=-n*s,t[1]=-o*s,t[2]=-i*s,t[3]=r*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,o=e[0]+e[4]+e[8];if(o>0)n=Math.sqrt(o+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var r=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*r+r]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*r+a]-e[3*a+r])*n,t[r]=(e[3*r+i]+e[3*i+r])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,t.exports=s},function(t,e,n){var o=n(0),i={};i.create=function(){var t=new o.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new o.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,n){return t[0]=e,t[1]=n,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},i.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t},i.distance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1];return Math.sqrt(n*n+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var n=e[0],o=e[1],i=n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,n){var o=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=o,t},i.lerp=function(t,e,n,o){var i=e[0],r=e[1];return t[0]=i+o*(n[0]-i),t[1]=r+o*(n[1]-r),t},i.random=function(t,e){e=e||1;var n=2*o.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},i.transformMat2=function(t,e,n){var o=e[0],i=e[1];return t[0]=n[0]*o+n[2]*i,t[1]=n[1]*o+n[3]*i,t},i.transformMat2d=function(t,e,n){var o=e[0],i=e[1];return t[0]=n[0]*o+n[2]*i+n[4],t[1]=n[1]*o+n[3]*i+n[5],t},i.transformMat3=function(t,e,n){var o=e[0],i=e[1];return t[0]=n[0]*o+n[3]*i+n[6],t[1]=n[1]*o+n[4]*i+n[7],t},i.transformMat4=function(t,e,n){var o=e[0],i=e[1];return t[0]=n[0]*o+n[4]*i+n[12],t[1]=n[1]*o+n[5]*i+n[13],t},i.forEach=function(){var t=i.create();return function(e,n,o,i,r,a){var s,l;for(n||(n=2),o||(o=0),l=i?Math.min(i*n+o,e.length):e.length,s=o;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],r(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},i.equals=function(t,e){var n=t[0],i=t[1],r=e[0],a=e[1];return Math.abs(n-r)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-a)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))},t.exports=i},function(t,e,n){"use strict";n.d(e,"a",function(){return i});const o=n(2).a.gl;class i{constructor(t){const e=this;e.texture=o.createTexture();const n=new Image;n.onload=(()=>{o.bindTexture(o.TEXTURE_2D,e.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_NEAREST),o.generateMipmap(o.TEXTURE_2D),o.bindTexture(o.TEXTURE_2D,null)});const i=new Blob([new Uint8Array(t)],{type:"image/jpeg"}),r=(window.URL||window.webkitURL).createObjectURL(i);n.src=r}bind(t){o.activeTexture(t),o.bindTexture(o.TEXTURE_2D,this.texture)}unBind(){o.bindTexture(o.TEXTURE_2D,null)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});const o=n(2).a.gl;class i{constructor(t,e){const n=this;n.resources=e;const o=[],i=[],r=[],a={};a.vertices=[],a.normals=[],a.uvs=[],a.hashindices={},a.indices=[],a.index=0;const s=t.split("\n");let l=0;const u=/^v\s/,c=/^vn\s/,d=/^vt\s/,h=/^f\s/,f=/^material\s/,p=/\s+/;for(let t=0;t<s.length;t++){const e=s[t].trim(),m=e.split(p);if(m.shift(),u.test(e))o.push.apply(o,m);else if(f.test(e)){const t=e.match(/(?:"[^"]*"|^[^"]*$)/)[0].replace(/"/g,"");"none"!==t&&n.resources.load(t),a.indices.push({material:t,array:[]}),l=a.indices.length-1}else if(c.test(e))i.push.apply(i,m);else if(d.test(e))r.push.apply(r,m);else if(h.test(e)){let t=!1;for(let e=0,n=m.length;e<n;e++){if(3!==e||t||(e=2,t=!0),m[e]in a.hashindices)a.indices[l].array.push(a.hashindices[m[e]]);else{const t=m[e].split("/");a.vertices.push(+o[3*(t[0]-1)+0]),a.vertices.push(+o[3*(t[0]-1)+1]),a.vertices.push(+o[3*(t[0]-1)+2]),r.length&&(a.uvs.push(+r[2*(t[1]-1)+0]),a.uvs.push(+r[2*(t[1]-1)+1])),a.normals.push(+i[3*(t[2]-1)+0]),a.normals.push(+i[3*(t[2]-1)+1]),a.normals.push(+i[3*(t[2]-1)+2]),a.hashindices[m[e]]=a.index,a.indices[l].array.push(a.index),a.index+=1}3===e&&t&&a.indices[l].array.push(a.hashindices[m[0]])}}}n.indices=a.indices,n.vertices=a.vertices,a.uvs.length>0&&(n.uvs=a.uvs),a.normals.length>0&&(n.normals=a.normals),n.initMeshBuffers()}buildBuffer(t,e,n){const i=o.createBuffer(),r=t===o.ARRAY_BUFFER?Float32Array:Uint16Array;return o.bindBuffer(t,i),o.bufferData(t,new r(e),o.STATIC_DRAW),i.itemSize=n,i.numItems=e.length/n,i}initMeshBuffers(){const t=this;t.indices.forEach(e=>{e.indexBuffer=t.buildBuffer(o.ELEMENT_ARRAY_BUFFER,e.array,1)}),t.vertexBuffer=t.buildBuffer(o.ARRAY_BUFFER,t.vertices,3),t.uvs.length>0&&(t.uvBuffer=t.buildBuffer(o.ARRAY_BUFFER,t.uvs,2)),t.normals.length>0&&(t.normalBuffer=t.buildBuffer(o.ARRAY_BUFFER,t.normals,3))}deleteMeshBuffers(){const t=this;t.indices.forEach(t=>{o.deleteBuffer(t.indexBuffer)}),o.deleteBuffer(t.vertexBuffer),t.uvs.length>0&&o.deleteBuffer(t.uvBuffer),t.normals.length>0&&o.deleteBuffer(t.normalBuffer)}render(){const t=this;o.bindBuffer(o.ARRAY_BUFFER,t.vertexBuffer),o.vertexAttribPointer(0,t.vertexBuffer.itemSize,o.FLOAT,!1,0,0),o.enableVertexAttribArray(0),t.uvs.length>0&&(o.bindBuffer(o.ARRAY_BUFFER,t.uvBuffer),o.vertexAttribPointer(1,t.uvBuffer.itemSize,o.FLOAT,!1,0,0),o.enableVertexAttribArray(1)),t.normals.length>0&&(o.bindBuffer(o.ARRAY_BUFFER,t.normalBuffer),o.vertexAttribPointer(2,t.normalBuffer.itemSize,o.FLOAT,!1,0,0),o.enableVertexAttribArray(2)),t.indices.forEach(e=>{"none"!==e.material&&t.resources.get(e.material).bind(o.TEXTURE0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer),o.drawElements(o.TRIANGLES,e.indexBuffer.numItems,o.UNSIGNED_SHORT,0)}),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),o.disableVertexAttribArray(0),t.uvs.length>0&&o.disableVertexAttribArray(1),t.normals.length>0&&o.disableVertexAttribArray(2)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1);o.a.addCSS(`\n    #loading-div {\n        width: 100%;\n        height: 100%;\n        left: 0px;\n        top: 0px;\n        margin: 0;\n        padding: 0;\n        position: absolute;\n        background-color: black;\n        z-index : 99998;\n    }\n\n    #logo { \n        position: fixed; \n        width: 20vh; \n        height: 20vh; \n        top: 50%; \n        left: 50%; \n        margin-top: -10vh; \n        margin-left: -10vh; \n        -webkit-animation:spin 3s linear infinite;\n         z-index : 99999;\n    }\n\n    @-webkit-keyframes spin { \n        100% { \n            -webkit-transform: rotate(360deg); \n        } \n    }\n    `);let i=!1;const r=o.a.addElement("div","loading-div"),a=o.a.addElement("img","logo");a.src="resources/logo.svg",a.style.display="none",r.style.display="none";const s={toggle(t){(i=void 0===t?!i:t)?(a.style.display="inline",r.style.display="block"):(a.style.display="none",r.style.display="none")}}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var o=n(11),i=n.n(o),r=n(3),a=(n.n(r),n(12)),s=n(4),l=n(5),u=n(10),c=n(13),d=n(1);if(a.a.addKeyDownEvent(192,()=>{s.a.toggle(),u.a.toggle(),a.a.toggleCursor()}),a.a.addKeyDownEvent(13,()=>{s.a.execute()}),d.a.isMobile()){const t=d.a.addElement("div","console-div"),e=new i.a(t);e.get("pan").set({direction:i.a.DIRECTION_ALL}),e.on("pandown",t=>{t.distance>50&&"pandown"===t.type&&(s.a.toggle(!0),a.a.toggleCursor(!0),u.a.toggle(!1))}),document.addEventListener("deviceready",()=>{s.a.log("Platform: "+cordova.platformId),"android"===cordova.platformId&&window.addEventListener("native.keyboardhide",()=>{Fullscreen.on(),s.a.toggle(!1),a.a.toggleCursor(!1),u.a.toggle(!0)})},!1)}const h={update(t){if(s.a.visible())return;const e=t/1e3,n=a.a.cursorMovement();l.a.rotation[0]=l.a.rotation[0]-n.x/33*c.a.looksensitivity,l.a.rotation[1]=l.a.rotation[1]+n.y/33*c.a.looksensitivity,l.a.rotation[1]>89&&(l.a.rotation[1]=89),l.a.rotation[1]<-89&&(l.a.rotation[1]=-89),l.a.rotation[0]<0&&(l.a.rotation[0]=360),l.a.rotation[0]>360&&(l.a.rotation[0]=0),l.a.direction[0]=0,l.a.direction[1]=0,l.a.direction[2]=1,r.vec3.rotateX(l.a.direction,l.a.direction,[0,0,0],r.glMatrix.toRadian(l.a.rotation[1])),r.vec3.rotateY(l.a.direction,l.a.direction,[0,0,0],r.glMatrix.toRadian(l.a.rotation[0])),r.vec3.normalize(l.a.direction,l.a.direction);let o=0,i=0;a.a.isDown(c.a.forward)&&(o+=1),a.a.isDown(c.a.backwards)&&(o-=1),a.a.isDown(c.a.left)&&(i-=1),a.a.isDown(c.a.right)&&(i+=1);const u=r.vec3.clone(l.a.direction);u[1]=0,r.vec3.rotateY(u,u,[0,0,0],r.glMatrix.toRadian(-90)),r.vec3.normalize(u,u),o*=e*c.a.movespeed,i*=e*c.a.movespeed,l.a.position[0]=l.a.position[0]+l.a.direction[0]*o+u[0]*i,l.a.position[1]=l.a.position[1]+l.a.direction[1]*o+u[1]*i,l.a.position[2]=l.a.position[2]+l.a.direction[2]*o+u[2]*i}}},function(t,e,n){!function(e){t.exports=e()}(function(){function t(){}function e(t,n){return this.identifier=n.identifier,this.position=n.position,this.frontPosition=n.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(n),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=e.id,e.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function n(t,e){var o=this;return o.nipples=[],o.idles=[],o.actives=[],o.ids=[],o.pressureIntervals={},o.manager=t,o.id=n.id,n.id+=1,o.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},o.config(e),"static"!==o.options.mode&&"semi"!==o.options.mode||(o.options.multitouch=!1),o.options.multitouch||(o.options.maxNumberOfNipples=1),o.updateBox(),o.prepareNipples(),o.bindings(),o.begin(),o.nipples}function o(t){var e=this;e.ids={},e.index=0,e.collections=[],e.config(t),e.prepareCollections();var n;return c.bindEvt(window,"resize",function(t){clearTimeout(n),n=setTimeout(function(){var t,n=c.getScroll();e.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:n.x+t.left,y:n.y+t.top}})})},100)}),e.collections}var i,r=!!("ontouchstart"in window),a=!!window.PointerEvent,s=!!window.MSPointerEvent,l={touch:{start:"touchstart",move:"touchmove",end:"touchend"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},u={};a?i=l.pointer:s?i=l.MSPointer:r?(i=l.touch,u=l.mouse):i=l.mouse;var c={};c.distance=function(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},c.angle=function(t,e){var n=e.x-t.x,o=e.y-t.y;return c.degrees(Math.atan2(o,n))},c.findCoord=function(t,e,n){var o={x:0,y:0};return n=c.radians(n),o.x=t.x-e*Math.cos(n),o.y=t.y-e*Math.sin(n),o},c.radians=function(t){return t*(Math.PI/180)},c.degrees=function(t){return t*(180/Math.PI)},c.bindEvt=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent(e,n)},c.unbindEvt=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent&&t.detachEvent(e,n)},c.trigger=function(t,e,n){var o=new CustomEvent(e,n);t.dispatchEvent(o)},c.prepareEvent=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},c.getScroll=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},c.applyPosition=function(t,e){e.x&&e.y?(t.style.left=e.x+"px",t.style.top=e.y+"px"):(e.top||e.right||e.bottom||e.left)&&(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left)},c.getTransitionStyle=function(t,e,n){var o=c.configStylePropertyObject(t);for(var i in o)if(o.hasOwnProperty(i))if("string"==typeof e)o[i]=e+" "+n;else{for(var r="",a=0,s=e.length;a<s;a+=1)r+=e[a]+" "+n+", ";o[i]=r.slice(0,-2)}return o},c.getVendorStyle=function(t,e){var n=c.configStylePropertyObject(t);for(var o in n)n.hasOwnProperty(o)&&(n[o]=e);return n},c.configStylePropertyObject=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},c.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},c.safeExtend=function(t,e){var n={};for(var o in t)t.hasOwnProperty(o)&&e.hasOwnProperty(o)?n[o]=e[o]:t.hasOwnProperty(o)&&(n[o]=t[o]);return n},c.map=function(t,e){if(t.length)for(var n=0,o=t.length;n<o;n+=1)e(t[n]);else e(t)},t.prototype.on=function(t,e){var n,o=this,i=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var r=0;r<i.length;r+=1)n=i[r],o._handlers_[n]=o._handlers_[n]||[],o._handlers_[n].push(e);return o},t.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},void 0===t?n._handlers_={}:void 0===e?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n},t.prototype.trigger=function(t,e){var n,o=this,i=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var r=0;r<i.length;r+=1)n=i[r],o._handlers_[n]&&o._handlers_[n].length&&o._handlers_[n].forEach(function(t){t.call(o,{type:n,target:o},e)})},t.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=c.safeExtend(e.options,t))},t.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){"function"==typeof n["on"+e]?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},c.bindEvt(t,i[e],n._domHandlers_[e]),u[e]&&c.bindEvt(t,u[e],n._domHandlers_[e]),n},t.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},c.unbindEvt(t,i[e],n._domHandlers_[e]),u[e]&&c.unbindEvt(t,u[e],n._domHandlers_[e]),delete n._domHandlers_[e],this},e.prototype=new t,e.constructor=e,e.id=0,e.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},e.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=c.getVendorStyle("borderRadius","50%"),n=c.getTransitionStyle("transition","opacity",t),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},c.extend(o.el,n),c.extend(o.back,e),c.extend(o.front,e),this.applyStyles(o),this},e.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this},e.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},e.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},e.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},e.prototype.show=function(t){var e=this;return e.options.dataOnly?e:(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)},e.options.fadeTime),e)},e.prototype.hide=function(t){var e=this;return e.options.dataOnly?e:(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=n,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.restPosition(),e)},e.prototype.restPosition=function(t){var e=this;e.frontPosition={x:0,y:0};var n=e.options.fadeTime+"ms",o={};o.front=c.getTransitionStyle("transition",["top","left"],n);var i={front:{}};i.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(o),e.applyStyles(i),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},e.prototype.restCallback=function(){var t=this,e={};e.front=c.getTransitionStyle("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)},e.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},e.prototype.computeDirection=function(t){var e,n,o,i=t.angle.radian,r=Math.PI/4,a=Math.PI/2;if(e=i>r&&i<3*r?"up":i>-r&&i<=r?"left":i>3*-r&&i<=-r?"down":"right",n=i>-a&&i<a?"left":"right",o=i>0?"up":"down",t.force>this.options.threshold){var s={};for(var l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:n,y:o,angle:e},t.direction=this.direction;for(var l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return t;u.x&&u.y||this.trigger("plain",t),u.x||this.trigger("plain:"+n,t),u.y||this.trigger("plain:"+o,t),u.angle||this.trigger("dir dir:"+e,t)}return t},n.prototype=new t,n.constructor=n,n.id=0,n.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(t){if(void 0===t)return e[0];for(var n=0,o=e.length;n<o;n+=1)if(e[n].identifier===t)return e[n];return!1}},n.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"},n.prototype.begin=function(){var t=this,e=t.options;if("static"===e.mode){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}},n.prototype.createNipple=function(t,n){var o=this,i=c.getScroll(),r={},a=o.options;if(t.x&&t.y)r={x:t.x-(i.x+o.box.left),y:t.y-(i.y+o.box.top)};else if(t.top||t.right||t.bottom||t.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",a.zone.appendChild(s);var l=s.getBoundingClientRect();a.zone.removeChild(s),r=t,t={x:l.left+i.x,y:l.top+i.y}}var u=new e(o,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restOpacity:a.restOpacity,mode:a.mode,identifier:n,position:t,zone:a.zone,frontPosition:{x:0,y:0}});return a.dataOnly||(c.applyPosition(u.ui.el,r),c.applyPosition(u.ui.front,u.frontPosition)),o.nipples.push(u),o.trigger("added "+u.identifier+":added",u),o.manager.trigger("added "+u.identifier+":added",u),o.bindNipple(u),u},n.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()},n.prototype.bindNipple=function(t){var e,n=this,o=function(t,o){e=t.type+" "+o.id+":"+t.type,n.trigger(e,o)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},n.prototype.pressureFn=function(t,e,n){var o=this,i=0;clearInterval(o.pressureIntervals[n]),o.pressureIntervals[n]=setInterval(function(){var n=t.force||t.pressure||t.webkitForce||0;n!==i&&(e.trigger("pressure",n),o.trigger("pressure "+e.identifier+":pressure",n),i=n)}.bind(o),100)},n.prototype.onstart=function(t){var e=this,n=e.options;t=c.prepareEvent(t),e.updateBox();return c.map(t,function(t){e.actives.length<n.maxNumberOfNipples&&e.processOnStart(t)}),e.manager.bindDocument(),!1},n.prototype.processOnStart=function(t){var e,n=this,o=n.options,i=n.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,a={x:t.pageX,y:t.pageY},s=n.getOrCreate(i,a);s.identifier=i;var l=function(e){e.trigger("start",e),n.trigger("start "+e.id+":start",e),e.show(),r>0&&n.pressureFn(t,e,e.identifier),n.processOnMove(t)};if((e=n.idles.indexOf(s))>=0&&n.idles.splice(e,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==o.mode)l(s);else{if(!(c.distance(a,s.position)<=o.catchDistance))return s.destroy(),void n.processOnStart(t);l(s)}return s},n.prototype.getOrCreate=function(t,e){var n,o=this,i=o.options;return/(semi|static)/.test(i.mode)?(n=o.idles[0])?(o.idles.splice(0,1),n):"semi"===i.mode?o.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):n=o.createNipple(e,t)},n.prototype.processOnMove=function(t){var e=this,n=e.options,o=e.manager.getIdentifier(t),i=e.nipples.get(o);if(!i)return console.error("Found zombie joystick with ID "+o),void e.manager.removeIdentifier(o);i.identifier=o;var r=i.options.size/2,a={x:t.pageX,y:t.pageY},s=c.distance(a,i.position),l=c.angle(a,i.position),u=c.radians(l),d=s/r;s>r&&(s=r,a=c.findCoord(i.position,s,l)),i.frontPosition={x:a.x-i.position.x,y:a.y-i.position.y},n.dataOnly||c.applyPosition(i.ui.front,i.frontPosition);var h={identifier:i.identifier,position:a,force:d,pressure:t.force||t.pressure||t.webkitForce||0,distance:s,angle:{radian:u,degree:l},instance:i};(h=i.computeDirection(h)).angle={radian:c.radians(180-l),degree:180-l},i.trigger("move",h),e.trigger("move "+i.id+":move",h)},n.prototype.processOnEnd=function(t){var e=this,n=e.options,o=e.manager.getIdentifier(t),i=e.nipples.get(o),r=e.manager.removeIdentifier(i.identifier);i&&(n.dataOnly||i.hide(function(){"dynamic"===n.mode&&(i.trigger("removed",i),e.trigger("removed "+i.id+":removed",i),e.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(e.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),e.trigger("end "+i.id+":end",i),e.ids.indexOf(i.identifier)>=0&&e.ids.splice(e.ids.indexOf(i.identifier),1),e.actives.indexOf(i)>=0&&e.actives.splice(e.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?e.idles.push(i):e.nipples.indexOf(i)>=0&&e.nipples.splice(e.nipples.indexOf(i),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[r.id]=r.identifier))},n.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()},n.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(t){t.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()},o.prototype=new t,o.constructor=o,o.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(t){return!(n=t.get(e))}),n}},o.prototype.create=function(t){return this.createCollection(t)},o.prototype.createCollection=function(t){var e=this,o=new n(e,t);return e.bindCollection(o),e.collections.push(o),o},o.prototype.bindCollection=function(t){var e,n=this,o=function(t,o){e=t.type+" "+o.id+":"+t.type,n.trigger(e,o)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},o.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)},o.prototype.unbindDocument=function(t){var e=this;Object.keys(e.ids).length&&!0!==t||(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)},o.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},o.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e},o.prototype.onmove=function(t){return this.onAny("move",t),!1},o.prototype.onend=function(t){return this.onAny("end",t),!1},o.prototype.onAny=function(t,e){var n,o=this,i="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=c.prepareEvent(e);var r=function(t,e,n){n.ids.indexOf(e)>=0&&(n[i](t),t._found_=!0)};return c.map(e,function(t){n=o.getIdentifier(t),c.map(o.collections,r.bind(null,t,n)),t._found_||o.removeIdentifier(n)}),!1},o.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(t){t.destroy()}),t.off()},o.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};var d=new o;return{create:function(t){return d.create(t)},factory:d}})},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var o=n(3),i=(n.n(o),n(2)),r=n(14),a=n(5),s=n(9);const l=i.a.gl,u=o.mat4.create(),c=o.mat4.create();let d;o.mat4.identity(c),o.mat4.identity(u);const h={setTextures(t){d||(d=s.a.get("skyboxes/skybox.obj"));for(let e=0;e<6;e++)d.indices[e].material=t[e]},render(){l.disable(l.DEPTH_TEST),l.depthMask(!1),o.mat4.translate(u,c,a.a.position),r.a.sky.bind(),r.a.sky.setMat4("matWorld",u),r.a.sky.setMat4("matViewProj",a.a.viewProjection),d.render(),l.enable(l.DEPTH_TEST),l.depthMask(!0)}}}]);